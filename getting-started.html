<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; StreamLib 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="StreamLib 1.0 documentation" href="index.html" />
    <link rel="next" title="Usage" href="usage.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">StreamLib 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="data-stream">
<h2>Data Stream<a class="headerlink" href="#data-stream" title="Permalink to this headline">¶</a></h2>
<p>Any <strong>iterable</strong> object with <strong>hashable</strong> elements can be considered as a data stream. Here are some examples.</p>
<ul class="simple">
<li>a list of integers: <tt class="code docutils literal"><span class="pre">[1,</span> <span class="pre">10,</span> <span class="pre">20,</span> <span class="pre">1,</span> <span class="pre">5]</span></tt></li>
<li>a generator that yields tuples, see the instance <tt class="code docutils literal"><span class="pre">dataStream</span></tt> as follows,</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">demoGen</span><span class="p">(</span><span class="n">N</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">dataStream</span> <span class="o">=</span> <span class="n">demoGen</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li>a tuple of strings: <tt class="code docutils literal"><span class="pre">('fix',</span> <span class="pre">'the',</span> <span class="pre">'bug',</span> <span class="pre">please',</span> <span class="pre">'...')</span></tt></li>
<li>a string: <tt class="code docutils literal"><span class="pre">'abcdefgdahfahdfajkhfkahfsahfjksfhjk'</span></tt></li>
<li>many more</li>
</ul>
</div>
<div class="section" id="summarize-the-data-stream">
<h2>Summarize the data stream<a class="headerlink" href="#summarize-the-data-stream" title="Permalink to this headline">¶</a></h2>
<p>Many algorithms that are popular to summarize data streams are included
in the module <strong>streamlib</strong>. We give some examples to show their basic usage. Most sketches have similar methods, e.g. <cite>processBatch</cite>, <cite>estimate</cite>, <cite>reproduce</cite>, <cite>merge</cite> etc.</p>
<div class="section" id="count-min-sketch">
<h3>Count-Min Sketch<a class="headerlink" href="#count-min-sketch" title="Permalink to this headline">¶</a></h3>
<p>Count-Min sketch <a class="reference internal" href="#cm05" id="id1">[cm05]</a> is used to summarize the data stream and estimate the frequency of each element in the data stream. This sketch give high accurate estimation to heavy hitters (elements that have high frequencies) while relatively large error may induced for light elements. See following example for the basic usage.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">streamlib</span> <span class="kn">import</span> <span class="n">CountMin</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">CountMin</span><span class="p">()</span> <span class="c"># create a instance of CountMin, see document for more detail</span>
<span class="n">cm</span><span class="o">.</span><span class="n">processBatch</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Estimated frequency of&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="n">cm</span><span class="o">.</span><span class="n">estimate</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>result of above code,</p>
<div class="highlight-python"><div class="highlight"><pre>Estimated frequency of 0 is 4
Estimated frequency of 1 is 6
Estimated frequency of 2 is 1
Estimated frequency of 3 is 2
Estimated frequency of 4 is 1
</pre></div>
</div>
<p>One can also create multiple instances of CountMin, each handle a substream (thus can be run in multi-threads).
By merging those instances, we obtain a summary of the joint stream of all substreams. See the following example.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">streamlib</span> <span class="kn">import</span> <span class="n">CountMin</span>
<span class="n">cm0</span> <span class="o">=</span> <span class="n">CountMin</span><span class="p">()</span> <span class="c"># create a instance of CountMin, see document for more detail</span>
<span class="n">cm1</span> <span class="o">=</span> <span class="n">cm0</span><span class="o">.</span><span class="n">reproduce</span><span class="p">()</span> <span class="c"># reproduce a compatible sketch of cm0</span>


<span class="n">cm0</span><span class="o">.</span><span class="n">processBatch</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">cm1</span><span class="o">.</span><span class="n">processBatch</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">cm0</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">cm1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Estimated frequency of&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="n">cm</span><span class="o">.</span><span class="n">estimate</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>which gives,</p>
<div class="highlight-python"><div class="highlight"><pre>Estimated frequency of 0 is 4
Estimated frequency of 1 is 6
Estimated frequency of 2 is 4
Estimated frequency of 3 is 1
Estimated frequency of 4 is 1
</pre></div>
</div>
<p>Most sketches included in <cite>summary</cite> module can also handle <strong>weighted</strong> data stream, let&#8217;s consider
the following case,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">streamlib</span> <span class="kn">import</span> <span class="n">CountMin</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">CountMin</span><span class="p">()</span>
<span class="n">dataStream</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">)]</span>
<span class="n">cm</span><span class="o">.</span><span class="n">processBatch</span><span class="p">(</span><span class="n">dataStream</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># set weighted=True</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Estimated frequency of&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="n">cm</span><span class="o">.</span><span class="n">estimate</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>it gives</p>
<div class="highlight-python"><div class="highlight"><pre>Estimated frequency of 0 is 520
Estimated frequency of 1 is 104
Estimated frequency of 2 is 1
Estimated frequency of 3 is 1
Estimated frequency of 4 is 5
</pre></div>
</div>
</div>
<div class="section" id="ams-f2-sketch">
<h3>AMS F2 Sketch<a class="headerlink" href="#ams-f2-sketch" title="Permalink to this headline">¶</a></h3>
<p>AMS F2 Sketch can be used to estimate the second moment of the frequency vector of a data stream.
For example, when a data stream is <cite>[1, 1, 1, 2, 2, 3]</cite>, there are three 1, two 2 and one 3, its second moment of the frequency vector then be <cite>3^2 + 2^2 + 1^2 = 14</cite>. Here we show its most basic usage.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">streamlib</span> <span class="kn">import</span> <span class="n">F2</span>
<span class="c"># set the bucket size as w=100</span>
<span class="c"># the |EstimatedValue - TrueValue| &lt;= TrueValue / sqrt(w)</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">F2</span><span class="p">(</span><span class="n">w</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">dataStream</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">f2</span><span class="o">.</span><span class="n">processBatch</span><span class="p">(</span><span class="n">dataStream</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Estimated F2 =&#39;</span><span class="p">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">estimate</span><span class="p">()</span>
</pre></div>
</div>
<p>which gives,</p>
<div class="highlight-python"><div class="highlight"><pre>Estimated F2 = 13
</pre></div>
</div>
</div>
</div>
<div class="section" id="bibliography">
<h2>Bibliography<a class="headerlink" href="#bibliography" title="Permalink to this headline">¶</a></h2>
<table class="docutils citation" frame="void" id="ccfc04" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[ccfc04]</td><td>Charikar, Moses, Kevin Chen, and Martin Farach-Colton. &#8220;Finding frequent items in data streams.&#8221; Automata, Languages and Programming. Springer Berlin Heidelberg, 2002. 693-703.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ams" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[ams]</td><td>Alon, Noga, Yossi Matias, and Mario Szegedy. &#8220;The space complexity of approximating the frequency moments.&#8221; Proceedings of the twenty-eighth annual ACM symposium on Theory of computing. ACM, 1996.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="bjkst" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[bjkst]</td><td>Bar-Yossef, Ziv, et al. &#8220;Counting distinct elements in a data stream.&#8221; Randomization and Approximation Techniques in Computer Science. Springer Berlin Heidelberg, 2002. 1-10.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="cm05" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[cm05]</a></td><td>Cormode, Graham, and S. Muthukrishnan. &#8220;An improved data stream summary: the count-min sketch and its applications.&#8221; Journal of Algorithms 55.1 (2005): 58-75.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="mg82" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[mg82]</td><td>Misra, Jayadev, and David Gries. &#8220;Finding repeated elements.&#8221; Science of computer programming 2.2 (1982): 143-152.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="myblog" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[myblog]</td><td><a class="reference external" href="http://jiecchen.github.io/blog/2014/08/13/quantile-sketch/">http://jiecchen.github.io/blog/2014/08/13/quantile-sketch/</a></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#data-stream">Data Stream</a></li>
<li><a class="reference internal" href="#summarize-the-data-stream">Summarize the data stream</a><ul>
<li><a class="reference internal" href="#count-min-sketch">Count-Min Sketch</a></li>
<li><a class="reference internal" href="#ams-f2-sketch">AMS F2 Sketch</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bibliography">Bibliography</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="usage.html"
                        title="next chapter">Usage</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getting-started.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             >next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">StreamLib 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Jiecao Chen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>